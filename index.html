<!-- ① 先にグローバルエラーを画面に出す（main.jsが死んでも表示される） -->
<script>
(function(){
  function setText(id, t){
    var el = document.getElementById(id);
    if (el) el.textContent = t;
  }
  window.addEventListener('error', function(e){
    setText('txtStatus', 'JSエラー');
    setText('txtActing', (e.message || '').slice(0, 120));
    var log = document.getElementById('logText');
    if (log) log.textContent = (e.error && e.error.stack) ? e.error.stack : (e.message || String(e));
    var box = document.getElementById('logBox');
    if (box) box.open = true;
  });
  window.addEventListener('unhandledrejection', function(e){
    setText('txtStatus', 'Promiseエラー');
    setText('txtActing', String(e.reason).slice(0, 120));
    var log = document.getElementById('logText');
    if (log) log.textContent = String(e.reason);
    var box = document.getElementById('logBox');
    if (box) box.open = true;
  });

  // 起動確認（main.jsが動かなくてもここは動く）
  setText('txtStatus', 'boot: html ok');
})();
</script>

<!-- ② moduleの読み込み失敗も画面に出す -->
<script
  type="module"
  src="./js/main.js?v=99"
  onerror="document.getElementById('txtStatus').textContent='main.js load error'; document.getElementById('logBox').open=true;">
</script>
